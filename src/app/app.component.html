@if (isLoginPage) {
  <div class="login-container">
    <router-outlet></router-outlet>
  </div>
  }

@if (!isLoginPage) {
<div class="app-wrapper">
  <div class="app-container" [class.sidebar-collapsed]="isSidebarCollapsed">
    <!-- Sidebar -->
    <nav class="sidebar">
      <div class="sidebar-header">
        <div class="logo-container">
          <img src="logo.svg" alt="Logo" class="logo">
          @if (!isSidebarCollapsed) {
          <h2>問卷管理系統</h2>
          }
        </div>
        <button title="Toggle Sidebar" class="collapse-btn" (click)="toggleSidebar()">
          <i class="fas fa-chevron-left"></i>
        </button>
      </div>

      @if (!isSidebarCollapsed) {
      <div class="user-info">
        <img [src]="currentUser?.avatar" alt="User Avatar" class="user-avatar">
        <div class="user-details">
          <span class="user-name">{{ currentUser?.name }}</span>
          <span class="user-role">{{ getRoleText(currentUser?.role) }}</span>
        </div>
      </div>
      }

      <ul class="nav-links">
        <li>
          <a routerLink="/new/dashboard" routerLinkActive="active">
            <i class="fas fa-chart-line"></i>
            @if (!isSidebarCollapsed) {
            <span>儀表板</span>
            }
          </a>
        </li>
        <li>
          <a routerLink="/new/questionnaires" routerLinkActive="active">
            <i class="fas fa-clipboard-list"></i>
            @if (!isSidebarCollapsed) {
            <span>問卷列表</span>
            }
          </a>
        </li>
        <li>
          <a routerLink="/new/users" routerLinkActive="active">
            <i class="fas fa-users"></i>
            @if (!isSidebarCollapsed) {
            <span>用戶管理</span>
            }
          </a>
        </li>
        <li>
          <a routerLink="/new/external-forms" routerLinkActive="active">
            <i class="fas fa-file-alt"></i>
            @if (!isSidebarCollapsed) {
            <span>外部表單</span>
            }
          </a>
        </li>
      </ul>

      <div class="sidebar-footer">
        <button class="logout-btn" (click)="logout()">
          <i class="fas fa-sign-out-alt"></i>
          @if (!isSidebarCollapsed) {
          <span>登出</span>
          }
        </button>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
      <header class="main-header">
        <h1>{{ currentPage }}</h1>
        <div class="header-actions">
          <button title="Toggle Sidebar" class="notification-btn" [class.has-notifications]="hasNotifications">
            <i class="fas fa-bell"></i>
          </button>
        </div>
      </header>
      <div class="content-wrapper">
        <router-outlet></router-outlet>
      </div>
    </main>
  </div>
</div>
}